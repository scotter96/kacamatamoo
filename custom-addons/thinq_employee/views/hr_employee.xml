<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="view_employee_rename_work_email" model="ir.ui.view">
            <field name="name">hr.employee.rename.work_email</field>
            <field name="model">hr.employee</field>
            <field name="inherit_id" ref="hr.view_employee_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='work_email']" position="attributes">
                    <attribute name="string">Email</attribute>
                </xpath>
                <xpath expr="//field[@name='work_phone']" position="attributes">
                    <attribute name="string">Phone</attribute>
                    <attribute name="required">1</attribute>
                </xpath>
                <xpath expr="//field[@name='mobile_phone']" position="attributes">
                    <attribute name="string">Mobile</attribute>
                </xpath>
                <field name="pin" position="replace">
                    <label for="pin"/>
                    <div class="o_row">
                        <field name="pin" password="1"/>
                        <button string="Generate" class="btn btn-link" type="object" icon="fa-magic" name="generate_random_pin" invisible="pin"/>
                        <button string="Send PIN to Email" class="btn btn-link" type="object" icon="fa-envelope" name="send_email_pin" invisible="not pin"/>
                    </div>
                </field>
            </field>
        </record>

        <record model="ir.actions.server" id="action_generate_pin">
            <field name="name">Generate PIN</field>
            <field name="model_id" ref="hr.model_hr_employee"/>
            <field name="groups_id" eval="[(4, ref('hr.group_hr_user'))]"/>
            <field name="binding_model_id" ref="hr.model_hr_employee" />
            <field name="state">code</field>
            <field name="binding_view_types">list</field>
            <field name="code">
                for rec in records:
                    rec.generate_random_pin()
            </field>
        </record>

        <record model="ir.actions.server" id="action_pin_email">
            <field name="name">Send PIN to Email</field>
            <field name="model_id" ref="hr.model_hr_employee"/>
            <field name="groups_id" eval="[(4, ref('hr.group_hr_user'))]"/>
            <field name="binding_model_id" ref="hr.model_hr_employee" />
            <field name="state">code</field>
            <field name="binding_view_types">list</field>
            <field name="code">
                for rec in records:
                    rec.send_email_pin()
            </field>
        </record>

        <record model="ir.actions.server" id="action_generate_pin_email">
            <field name="name">Generate PIN and Send Email</field>
            <field name="model_id" ref="hr.model_hr_employee"/>
            <field name="groups_id" eval="[(4, ref('hr.group_hr_user'))]"/>
            <field name="binding_model_id" ref="hr.model_hr_employee" />
            <field name="state">code</field>
            <field name="binding_view_types">list</field>
            <field name="code">
                for rec in records:
                    rec.generate_random_pin()
                    rec.send_email_pin()
            </field>
        </record>
        
    </data>
</odoo>